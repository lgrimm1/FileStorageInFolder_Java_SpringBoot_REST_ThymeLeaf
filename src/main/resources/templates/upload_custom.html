<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{/fragments/head.html::head}" />
<body>
<header th:replace="~{/fragments/header.html::header}" />
<form th:object="${payload}" method="post" enctype="multipart/form-data">
  <h2>Custom File Upload</h2>
  <table>
    <tr>
      <th>Upload Type</th>
      <th>File Selection</th>
      <th>Action</th>
    </tr>
    <tr>
      <td>Single</td>
      <td>
        <label for="file" id="fileLabel" title="Browse file..." style="display: inline-block; border: 1px solid; line-height: 25px; cursor: pointer;">
          <input id="file" type="file" name="file" style="position: absolute; left: -99999rem;" onchange="changeFileCaption(this);" />
          <span id="file_caption">Browse file...</span>
        </label>
      </td>
      <td><input type="submit" value="Upload" formaction="/files/upload/single" /></td>
    </tr>
    <tr>
      <td>Multiple</td>
      <td>
        <label for="files" title="Browse files..." style="display: inline-block; border: 1px solid; line-height: 25px; cursor: pointer;">
          <input id="files" type="file" name="files" style="position: absolute; left: -99999rem;" multiple onchange="changeFilesCaption(this);" />
          <span id="files_caption">Browse files...</span>
        </label>
      </td>
      <td><input type="submit" value="Upload" formaction="/files/upload/multiple" /></td>
    </tr>
  </table>
</form>
<script>
  function changeFileCaption(element) {
      document.getElementById("file_caption").innerHTML = element.files.item(0).name;
  };
  function changeFilesCaption(element) {
      document.getElementById("files_caption").innerHTML = element.files.length + ' file(s) were selected';
  };
</script>
</body>
</html>
